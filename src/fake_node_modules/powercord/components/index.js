const { getModuleByDisplayName, getComponentByDisplayName } = require('powercord/webpack');

require('fs')
  .readdirSync(__dirname)
  .filter(file => file !== 'index.js')
  .forEach(filename => {
    const moduleName = filename.split('.')[0];
    exports[moduleName] = require(`${__dirname}/${filename}`);
  });

// Add some util components
Object.assign(exports, {
  Button: getComponentByDisplayName('DropdownButton'),

  /**
   * @todo pretty self explanatory, replace with native component
   * when discord eventually axes it
   */
  Tooltip: getComponentByDisplayName('TooltipDeprecated'),
  Switch: getComponentByDisplayName('Switch'),
  Spinner: getComponentByDisplayName('Spinner'),
  Divider: getComponentByDisplayName('FormDivider')
});

(async () => {
  const Button = await getModuleByDisplayName('DropdownButton');
  [ 'DropdownSizes', 'Sizes', 'Colors', 'Looks' ].forEach(prop => exports.Button[prop] = Button[prop]);
})();
