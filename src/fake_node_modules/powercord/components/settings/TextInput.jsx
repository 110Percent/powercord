const { getModuleByDisplayName, React } = require('powercord/webpack');
const FormItem = getModuleByDisplayName('formitem');
const Input = getModuleByDisplayName('textinput');
const FormDivider = getModuleByDisplayName('formdivider');
const Flex = getModuleByDisplayName('flex');

const flexClassName = `${Flex.Direction.VERTICAL} ${Flex.Justify.START} ${Flex.Align.STRETCH} ${Flex.Wrap.NO_WRAP}`;

module.exports = class TextInput extends React.Component {
  constructor () {
    super();
    const classModule = powercord.pluginManager.get('pc-classNameNormalizer')._fetchAllModules()
      .filter(m => Object.keys(m).filter(k => k === 'marginBottom20').length !== 0)[0];

    this.marginBottom20 = classModule.marginBottom20;
    this.marginTop20 = classModule.marginTop20;
  }

  render () {
    const title = this.props.children;
    delete this.props.children;
    return <FormItem title={title} className={`${flexClassName} ${this.marginBottom20}`}>
      <Input {...this.props}/>
      <FormDivider className={this.marginTop20}/>
    </FormItem>;
  }
};
